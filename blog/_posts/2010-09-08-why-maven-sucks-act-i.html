---
layout: post
title: "Why Maven Sucks: Act I"
---

<p>These ruminations were languishing in commit messages, which would normally satisfy my urge to complain. But now I need to complain further, and don’t have a commit message in which to express my discontent, so I’m airing the whole basket of dirty laundry here, and going on the record as a Maven hater. For those of you privy to the original commit messages, my new complaints will be aired in Act III. Now then, on with the show.</p>
<p>Reasons that Maven sucks:</p>
<p>1. Warnings and deprecations are not shown by default.</p>
<p>2. Documentation shows use of <code>&lt;compilerArgument&gt;</code> with multiple arguments in a single element:</p>
<pre>
&lt;compilerArgument&gt;-foo -bar&lt;/compilerArgument&gt;
</pre>
<p>which is a bald-faced lie. Only a single argument is allowed inside a <code>&lt;compilerArgument&gt;</code> element. If you try to use multiple arguments, you see that it uselessly tries to pass everything as a single argument:</p>
<pre>
Failure executing javac, but could not parse the error:
javac: invalid flag: -foo -bar
Usage: javac &lt;options&gt; &lt;source files&gt;
use -help for a list of possible options
</pre>
<p>(Bear in mind that -foo and -bar were actual javac arguments, not the stand-ins I’m using here. I’m saving the real arguments for a punchline below.)</p>
<p>Web search turns up “helpful” advice to use multiple elements:</p>
<pre>
&lt;compilerArgument&gt;-foo&lt;/compilerArgument&gt;
&lt;compilerArgument&gt;-bar&lt;/compilerArgument&gt;
</pre>
<p>Fair enough, but also a bald-faced lie. After spending a bunch of time debugging why my compiler arguments were not working, I discovered that Maven was just (silently) using the last one and ignoring/overwriting all of the previous arguments.</p>
<p>I had noticed while perusing <a href="http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html">the documentation</a> that it was also possible to use the so-called “Map version” (whatever that means), which uses this completely stupid syntax:</p>
<pre>
&lt;compilerArguments&gt;
  &lt;foo/&gt;
  &lt;bar/&gt;
&lt;/compilerArguments&gt;
</pre>
<p>Why is that syntax completely stupid, you might ask? Well, dear reader, because the arguments that I’m actually passing are the following:</p>
<pre>
&lt;compilerArguments&gt;
  &lt;Xlint/&gt;
  &lt;Xlint:-serial/&gt;
&lt;/compilerArguments&gt;
</pre>
<p>which is a case study in how not to represent information in XML. I didn’t even try that originally because I was sure that it would not work, given the wacky non-[a-zA-z]+ nature of the argument I needed to supply. The fact that it does work gives me the fear. You might think the same thing <a href="http://bungleton.com/">Charlie</a> did, when he replied to my original commit message:</p>
<blockquote><p>
Doesn’t that create an element named -serial in the Xlint namespace?
</p></blockquote>
<p>Apparently not, because it works.</p>
<p>You might also wonder, like I did, whether the following form would provide satisfaction:</p>
<pre>
&lt;compilerArguments&gt;
  &lt;compilerArgument&gt;-Xlint&lt;/compilerArgument&gt;
  &lt;compilerArgument&gt;-Xlint:-serial&lt;/compilerArgument&gt;
&lt;/compilerArguments&gt;
</pre>
<p>By being absurdly verbose, it seems right in line with The Maven Way<sup>TM</sup>. However, that results in <code>-compilerArgument=-Xlint</code> and <code>-compilerArgument=-Xlint:-serial</code> being passed to the compiler. Hilarity naturally ensues.</p>
